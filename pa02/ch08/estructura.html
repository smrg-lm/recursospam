
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Estructura de las aplicaciones (MVC) &#8212; Recursos de Programación para Arte y Música</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'pa02/ch08/estructura';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Recursos de Programación para Arte y Música - Home"/>
    <img src="../../_static/logo.png" class="logo__image only-dark pst-js-only" alt="Recursos de Programación para Arte y Música - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Recursos de Programación para Música y Arte
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Algoritmos Básicos en p5.js</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../pa01/ch01/intro-vsjsp5.html">Instroducción a JavaScript y p5.js utilizando VSCode</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pa01/ch01/config-vsc.html">Entorno de desarrollo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pa01/ch01/intro-js.html">Recursos de JavasScript utilizados</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pa01/ch01/intro-p5.html">Introducción a p5.js</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../pa01/ch02/estructuras-dyc.html">Estructuras de datos y de control</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pa01/ch02/datos.html">Estructuras de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pa01/ch02/control.html">Estructuras de control</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../pa01/ch03/funciones.html">Funciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pa01/ch04/clases.html">Programación orientada a objetos en JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pa01/ch05/movimiento.html">Movimientos simples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pa01/ch06/part%C3%ADculas.html">Sistemas de partículas</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../pa01/ch07/intro.html">Sonido</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pa01/ch07/audio-digital.html">Audio Digital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pa01/ch07/p5sonido.html">Librería integrada p5.sound.js</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../pa01/ch08/p5imagen.html">Imagen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pa01/debuging.html">Debugueo</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Arquitectura Cliente-Servidor en Node.js</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ch01/nodejs-commonjs.html">Node.js y módulos CommonJS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch02/cliente-servidor.html">Servidor HTTP básico</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch03/nodejs-express.html">Entorno de desarrollo Node.js + Express</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fpa02/ch08/estructura.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/pa02/ch08/estructura.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Estructura de las aplicaciones (MVC)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creando-la-estructura-del-proyecto">Creando la estructura del proyecto</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="estructura-de-las-aplicaciones-mvc">
<h1>Estructura de las aplicaciones (MVC)<a class="headerlink" href="#estructura-de-las-aplicaciones-mvc" title="Link to this heading">#</a></h1>
<p>El <em>framework</em> Express no require un estructura de proyecto predefinida, las aplicaciones se pueden organizar de distintas maneras. Sin emabargo, existe un patrón de diseño de aplicaciones que es muy utilizado y se suele implementar con una estructura de directorios con nombres específicos dentro de los proyectos.</p>
<p>El patrón de diseño se llama <strong>Model View Controller</strong> (MVC) y consiste en separar las partes de la aplicación que manejan las estructuras de datos, los modelo, de las que muestran los resultados al usuario, las vistas. Ambas interactúan por medio de un <em>middleware</em> que actúa como controlador, y de ahí el nombre. No vamos a estudiar la teoría de este modelo pero la vamos a utilizar.</p>
<p><img alt="img" src="../../_images/mvc_express.png" /></p>
<p>Imagen obtenida de <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/routes">aquí</a>.</p>
<p>De este patrón de diseño, con los nombres que se ven en la imagen, deriva una estructura de directorios que se usa para almacenar los archivos que corresponden a cada una de las partes del diseño MVC más las rutas.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>proyecto/
<span class="w">  </span>controller/
<span class="w">  </span>model/
<span class="w">  </span>routes/
<span class="w">  </span>view
<span class="w">  </span>app.js
<span class="w">  </span>...
</pre></div>
</div>
<p>El directorio más fácil de entender es <code class="docutils literal notranslate"><span class="pre">routes</span></code>. Consiste en los enrutadores <code class="docutils literal notranslate"><span class="pre">express.Router</span></code> modularizados como vimos anteriormente.</p>
<p>Luego vendría el directorio <code class="docutils literal notranslate"><span class="pre">controller</span></code>, los controladores son, en nuestra aplicación <em>express</em>, los callbacks de los enrutadores. Son las funciones que van a procesar los datos de la petición, van a ir a buscar los datos a la base de datos y van a <em>renderizar</em> las páginas web por medio de plantillas. En principio, <strong>no vamos a separa los controladores en funciones aparte</strong>, pero tengan en cuenta que es posible que lo vean así en muchas partes que usen esta convención o alguna variación. Esto es así porque en aplicaciones más complejas es conveniente modularizar al máximo la estructura para que sea más fácil cambiar cada parte.</p>
<p>El directorio <code class="docutils literal notranslate"><span class="pre">model</span></code> contiene los <em>modelos relacionales de objetos</em> (ORM por <em>Object-Relational Model</em> en inglés) que interactúan con la base de datos. Estos modelos mapean las estructuras y tipos de datos de los lenguajes de programación, por ejemplo los diccionarios en JavaScript, a las estructuras que emplean los genstores de bases de datos, RDMS (<em>Relational Database Management System</em> en inglés), y sus consultas. Los ORM se implementan con librerías que soportan distintos tipos y marcas de bases de datos (<em>drivers</em>) y proveen una API para el lenguaje de programación que se esté usando. Una de las librerías ORM más usadas es <a class="reference external" href="https://sequelize.org">Sequelize</a> junto con el driver de la base de datos MySQL <a class="reference external" href="https://www.npmjs.com/package/mysql2">mysql2</a>. Dicho está para que los sepan, pero <strong>no vamos a usar una librería ORM</strong> porque vamos a hacer las consultas directamente con SQL. Sin embargo, estas librerías son muy importantes para trabajar en todo sitios web porque sipmlifican la programación a la vez que garantizan la integridad de los datos, lo que mitiga muchos problemas de seguridad.</p>
<p>Por último está el directorio <code class="docutils literal notranslate"><span class="pre">view</span></code> que contiene las estructuras que se encargan de la parte visual de nuestra apicación. Para las páginas web las “vistas”, que son las páginas HTML, se generan con un sistema plantilas. Las plantillas son estructuras de páginas HTML, o partes de estas, que están predefinidas y a las cuales se les pueden cambiar distintos parámetros por medio de la programación. Este es el mecanismo que se usa para genera <strong>páginas web dinámicas</strong> que cambian según los datos del cliente. Express cuenta con varios sistemas de plantillas, el que vamos a utilizar se llama <code class="docutils literal notranslate"><span class="pre">ejs</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Documentación MDN: <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/routes">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/routes</a></p>
</div>
<section id="creando-la-estructura-del-proyecto">
<h2>Creando la estructura del proyecto<a class="headerlink" href="#creando-la-estructura-del-proyecto" title="Link to this heading">#</a></h2>
<p>Comandos <code class="docutils literal notranslate"><span class="pre">npm</span></code> y directorios:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>init<span class="w"> </span>-y
npm<span class="w"> </span>i<span class="w"> </span>express<span class="w"> </span>better-sqlite3
npm<span class="w"> </span>i<span class="w"> </span>nodemon<span class="w"> </span>-D
</pre></div>
</div>
<ul class="simple">
<li><p>Crear el archivo <code class="docutils literal notranslate"><span class="pre">app.js</span></code>.</p></li>
<li><p>Crear los directorios <code class="docutils literal notranslate"><span class="pre">database</span></code>, <code class="docutils literal notranslate"><span class="pre">routes</span></code> y <code class="docutils literal notranslate"><span class="pre">view</span></code>.</p></li>
</ul>
<p>La estructura queda de la siguiente manera:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>proyecto
<span class="w">  </span>node_modules
<span class="w">  </span>database<span class="w">  </span><span class="c1"># Scripts para la base de datos.</span>
<span class="w">  </span>routes<span class="w">  </span><span class="c1"># Scripts para las rutas (index y user).</span>
<span class="w">  </span>view<span class="w">  </span><span class="c1"># Scripts para las plantillas.</span>
<span class="w">  </span>app.js<span class="w">  </span><span class="c1"># El archivo de la aplicación renombrado a &#39;app&#39; para que no se confunda con la ruta &#39;index&#39; que ahora ponemos a parte.</span>
<span class="w">  </span>package-lock.json
<span class="w">  </span>package.json
</pre></div>
</div>
<p>El archivo <code class="docutils literal notranslate"><span class="pre">package.json</span></code> luego de editar la sección de scripts de ejecución, <code class="docutils literal notranslate"><span class="pre">&quot;start&quot;</span></code> y <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, y cambiar el nombre de la sección <code class="docutils literal notranslate"><span class="pre">&quot;main&quot;</span></code> a <code class="docutils literal notranslate"><span class="pre">&quot;app.js&quot;</span></code> tiene que haber quedado de la siguiente manera (la versión de las librerías puede diferir):</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;proyecto&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;main&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;app.js&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;start&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;node app.js&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;dev&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nodemon app.js&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;keywords&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;author&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;license&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;better-sqlite3&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^8.6.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;express&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^4.18.2&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;nodemon&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^3.0.1&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Dentro de la carpeta <code class="docutils literal notranslate"><span class="pre">database</span></code>, más adelante, vamos a poner el módulo JavaScript que hace las consultas y el script que genera la base de datos.</p>
<p>Dentro de la carpeta <code class="docutils literal notranslate"><span class="pre">routes</span></code> vamos a crear un módulo para cada ruta, por ejemplo <code class="docutils literal notranslate"><span class="pre">'/'</span></code>, <code class="docutils literal notranslate"><span class="pre">'/home/*'</span></code>, <code class="docutils literal notranslate"><span class="pre">'/user/*'</span></code> con los objetos <code class="docutils literal notranslate"><span class="pre">express.Router</span></code>. Aquí es donde van a estar los controladores que van a ser muy simples, por eso no vamos a utilizar otro directorios para ellos.</p>
<p>Dentro de la carpeta <code class="docutils literal notranslate"><span class="pre">view</span></code>, más adelante, vamos a poner las plantillas que vamos a llamar desde los scripts de los módulos de cada ruta.</p>
<p>Dentro de las carpetas <code class="docutils literal notranslate"><span class="pre">routes</span></code> y <code class="docutils literal notranslate"><span class="pre">view</span></code> vamos a poner los scripts que vamos a nombrar según el nombre del documento html que estemos creando, por ejemplo <code class="docutils literal notranslate"><span class="pre">routes/index.js</span></code>, <code class="docutils literal notranslate"><span class="pre">view/index.ejs</span></code>.</p>
<p>Al módulo de la base de datos <code class="docutils literal notranslate"><span class="pre">database/db.js</span></code> los vamos a utilizar dentro de los módulos de los enrutadores, los scripts de la carpeta <code class="docutils literal notranslate"><span class="pre">/routes</span></code>.</p>
<p>Al script principal lo vamos a llamar <code class="docutils literal notranslate"><span class="pre">app.js</span></code> para que no se confunda con la página <code class="docutils literal notranslate"><span class="pre">index</span></code> que va a estar en la ruta raíz <code class="docutils literal notranslate"><span class="pre">/</span></code>. Desde este script es que vamos a montar los enrutadores que son los que se encargan de la base de datos y las plantillas. En <code class="docutils literal notranslate"><span class="pre">app.js</span></code> solo vamos a dejar la configuración de la aplicación servidor y el <em>middleware</em> a nivel de aplicación.</p>
<p>Entonces, cuando vayamos armando el proyecto nos va a quedar la siguiente estructura, sin mostrar los archivos de configuración o las librerías de node e inventando algunos nombres de archivo que luego agregaremos:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>database
<span class="w">  </span>create_users.sql
<span class="w">  </span>db.js
routes
<span class="w">  </span>index.js
<span class="w">  </span>user.js
view
<span class="w">  </span>footer.ejs
<span class="w">  </span>header.ejs
<span class="w">  </span>index.ejs
<span class="w">  </span>user.ejs
app.js
</pre></div>
</div>
<p>Hasta el momento solo trabajamos con el archivo <code class="docutils literal notranslate"><span class="pre">app.js</span></code>, que antes llamábamos <code class="docutils literal notranslate"><span class="pre">index.js</span></code>, y con el archivo <code class="docutils literal notranslate"><span class="pre">databas/db.js</span></code> que utilizamos para la base de datos. Aún tenemos que pulir, pero ya vimos cómo tenemos que hacer para modularizar las rutas en scripts dentro de <code class="docutils literal notranslate"><span class="pre">/routes</span></code>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./pa02/ch08"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creando-la-estructura-del-proyecto">Creando la estructura del proyecto</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Lucas Samaruga
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>